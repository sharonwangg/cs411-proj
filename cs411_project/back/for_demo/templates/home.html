<!-- 
    Templates written using the following tutorials:
    https://www.codementor.io/@garethdwyer/building-a-crud-application-with-flask-and-sqlalchemy-dm3wv7yu2 
    and https://realpython.com/introduction-to-flask-part-1-setting-up-a-static-site/
-->

{% extends 'layout.html' %}

{% block title %}Home{% endblock %}

{% block content %}
<h2>Home Page</h2>
<p>Welcome back, {{ usr }}!</p>
<body>
<div class="content">

    <h4>Forum Posts</h4>
    {% if msg != null %}
        <p>{{ msg }}</p>
    {% endif %}

        <table>
            <tr>
                <th>Username</th>
                <th>Post</th>
                <th>Date Posted</th>
                <th>Book Title</th>
            </tr>
            {% for task in tasks %}
                <tr>
                    <td>{{ task[0] }}</td>
                    <td>{{ task[1] }}</td>
                    <td>{{ task[2] }}</td>
                    <td>{{ task[4] }}</td>
                    {% if task[0] == usr %}
                    <td>
                        <a href="/delete/{{task[3]}}">Delete</a>
                        <br>
                        <a href="/update/{{task[3]}}">Update</a>
                    </td>
                    {% endif %}
                    
                </tr>
            {% endfor %}
        </table>
         <br>
         <form method="post" action="/search" 
         >
           <input type="text" placeholder="Search Posts" name="book">
           <button type="submit"><i class="fa fa-search"></i>
           </button>
       </form>
       <br>
       <br>
    <div class="form">
        <form action="/" method="POST">
            <input type="text" placeholder="Post text" name="content" id="content">
            <input type="text" placeholder="Book title" name="book1" id="book1">
            <input type="submit" value="Add Post">
        </form>
    </div>
</div>


        
    </body>
{% endblock %}